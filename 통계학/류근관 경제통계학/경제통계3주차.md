# 1. 상관관계

## 산포도와 상관관계

1. 산포도 

### 결합분포

- 두 변수 사이의 상호관계를 분석하기 위한 방법을 살펴봄
- 관계가 중요
    - 교육과 임금
    - 통화증가율과 물가상승률
    - 학급 규모와 학생 성적
- 결합분포(joint distribution) : 두 변수간의 관계 전모를 보여줌

### 산포도

- 두 변수 사이의 관계를 살펴보기 위해 산포도를 이용한다.
- 설명변수는 x로 표기하고 가로축에 표시
- 피설명변수는 y로 표기하고 세로축에 표기

### 산포도의 요약

- 가로로 보면 대략 95%의 점들이 x평균점을 기준으로 +-2SDx이내에 위치함
- 세로로 보면 대략 95%의 점들이 y평균점을 기준으로 +-2SDy 이내에 위치함
- x의 평균과 표준편차, y의 평균과 표준편차는 x와 y의 분포를 따로따로 요약

2. 상관계수

### 상관계수의 필요성

- 가로든 세로든 평균과 표준편차가 동일해도 두 변수의 관계는 상이
- 두 변수간 선형관계의 방향과 강도가 얼마나 되는지 측정할 필요성 대두
- 상관계수는 두 변수간 선형관계의 방향과 강도 측정
- 두 점의 관계가 직선에 의해서 잘 묘사될수록 상관계수의 절댓값이 큼

### 이변량 자료의 요약 통계량

- x의 평균과 표준편차
- y의 평균과 표준편차
- x와 y간 상관계수

### 상관계수의 범위, 부호

- 범위 : -1 <= r <= 1
- 상관계수 = 1 또는 -1 이면 완전상관(perfect correlation)
    - 모든 점들이 정확히 하나의 선 위에 위치
- 양의 상관관계이면 점의 분포가 우상향
- 음의 상관관계이면 점의 분포가 좌하향
- 두 변수의 표준편차가 모두 -이면 상관계수를 정의할 수 없음
- 두 변수 중 어느 한 변수만의 표준편차가 0이면 상관계수는 0

## 상관계수 구하기, 상관계수의 특징

### Covariance(공분산)

- 두 개의 변수가 공통으로 변화하는 부분
- (관측치의 x편차 * 관측치의 y편차)들의 합을 자유도로 나눈 값
- 단위를 상쇄시키기 위해 공분산을 각각의 표준편차의 곱으로 나눠줌

## 상관계수와 선형관계

### 상관계수와 관련된 유의사항

### 상관계수의 의미 

- '상관계수=0.8'은 산포도 상에서 80%의 점들이 하나의 선 주위에 빽빽하게 밀집해 있다는 것을 의미하지 않는다.
- '상관계수=0.8'은 상관계수가 0.4일 때보다 선형관계의 강도가 강하기는 하지만 정확히 두 배로 강하다는 것을 의미하지도 않는다.

### 상관계수가 유용하지 않은 경우

- 이탈값이 존재하는 경우
    - 이탈값을 확인하는 것이 첫 번째
- 두 변수간 관계가 비선형인 경우
    - 상관계수가 0이라는 것이 두 변수 사이에 아무 관계가 없다는 의미는 아님

### 변수 변환

- 적절한 변수변환을 통하여 비선형 관계를 선형관계로 근사시킴
    - ex) 비선형 관계를 로그 변환을 통해 선형관계로 바꿀 수 있음
    - 곱으로 시간에 따라서 늘어나는 변수는 로그를 취해줌

# 2. 상관관계와 회귀직선

## 자료의 선형근사

### linear spline equation

- knots : 매듭이 몇 개이고 어디에 위치해있는지
- x, (x-매듭의 위치값)
- 중회귀분석 (multiple regression anlysis) : 설명변수가 여러 개 있는 회귀분석

### 헷징(hedging)

- 시장에서 발생하는 또는 발생할 가격변동으로부터 야기되는 위험에 노출되는 정도를 감소시키기 위해 선택된 시장참가자의 자구적 행위

## 상관관계와 실제 관계

### 상관관계가 실제의 관계를 과장하는 경우

- 비율이나 평균의 자료로부터 구한 상관관계는 종종 실제의 관계를 과장
- 지역이나 국가 등 집단의 자료로부터 구한 상관계수는 개개인에게 적용되는 선형관계를 과장할 가능성이 있음.
- ex) 소득과 행복을 조사할때, 개인의 소득이 아닌 국가의 소득으로 조사할 경우 소득과 행복은 관계가 없는 것처럼 보임

### 상관계수가 곧바로 인과관계는 아니다

## 회귀직선의 추정 및 회귀계수의 해석

### y = a + bx

- b : x가 한 단위 증가할 때 y가 얼마나 증가하는지

# 3. 회귀분석

## 변수간의 관계

### 상관계수

- 두 변수 사이에 존재하는 직선의 관계를 측정
- 방향 : 스캐터 플롯상의 평균점을 원점으로 하여, 그 기준으로 어느 상한이 우세한지에 따라 방향이 결정됨
- 강도 : 직선 주위로 산포도상에 점들이 얼마나 밀집해있는디

### 회귀분석

- 회귀분석은 집단별 평균을 분석하는 통계쩍 방법
- 집단을 구분하는 분류지표가 한 개인지, 둘 또는 극 이상인지에 따라 단순회귀분석과 중회귀분석으로 나누어짐
- 표준편차선
    - 평균점으로부터 키의 표준편차 단위로 한 단위 더 키 큰 위치에 몸무게의 표준편차 단위로 몸무게가 한 단위 평균보다 더 높은 점
    - 두 변수의 표준화된 변수 값이 같은 점들을 이은 직선
    - x, y의 관계가 완벽하다면 모든 점이 표준편차선 위에 있을 것
    - 그렇지만 x,y의 관계가 완벽하지 않기 때문에(상관계수가 1이 아니기 때문에) 표준편차선보다 회귀직선이 더 완만한 기울기를 가지고 있음
- 회귀분석
    -  y의 x에 대한 회귀직선은 각각의 x값에 대응하는 y의 평균값을 추정
    - x값이 x평균값에서 1SDx 증가할 때 y값은 y평균값에서 r*SDy증가
    - r이 1보다 작기 때문에 표준편차선보다 완만함
    - x, y의 관계가 완벽하면 표준편차선이랑 같은 직선일 것임
    - 그렇게 형성된 점을 연결한 직선이 회귀직선
    - regression line

## 평균의 그래프

### 평균의 그래프와 회귀직선

- 회귀직선은 평균의 그래프를 하나의 직선으로 근사 시킨 것
- 평균의 그래프가 비선형이면 회귀직선으로의 선형 근사는 부적절
- x값을 넣을 때 y값을 알려주는 것

## 회귀분석방법

- x의 집단별 평균 y값을 구하고 y값의 선형직선을 그림

## 회귀효과

- x값이 평균보다 작을 때 과반수의 값이 SD선 위쪽에 위치함
- x값이 평균일 때 대부분의 값이 위 아래 골고루 위치함
- x값이 평균보다 클 때, 과반수의 y값이 SD선 아래쪽에 위치함

### 평범으로의 회귀
- 상관계쑤가 1보다 작기 때문에 회귀 효과에 의해 평균으로 회귀하는 경향이 있음
- 불확실성이 있기 때문에 발생하는 것

### 회귀오류(regression fallacy)
- 회귀효과를 무언가 중요한 효과로 착각하는 것
    - 관찰된 값 = 실제 값 + 확률오차

all models are wrong but some are useful
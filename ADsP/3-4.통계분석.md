# ADsP / 3-4. 통계 분석

Created By: 수민 오
Last Edited: Nov 22, 2019 10:14 PM
Tags: ADsP, 노트정리

### 통계분석의 이해

- 표본 추출 방법
    - 단순랜덤 추출법 (비복원 추출 / 복원 추출)
    - 계통추출법 - 임의 위치에서 매 K번째 항목을 추출하는 방법
    - 집락추출법 - 군집을 구분하고 군집별로 단순랜덤 추출법을 수행한 후, 모든 자료를 활용하거나 샘플링하는 방법
    - 층화추출법 - 이질적인 원소들로 구성된 모집단에서 각 계층을 고루 대표할 수 있도록 표본을 추출하는 방법

    집락추출법과 층화추출법을 구분하는 문제 주의!

     → 집락추출 (동질적 원소로 구성 / 집단 간 이질적)

     → 층화추출법 (이질적 원소로 구성 / 집단 간 동질적)

- 척도
    - 명목척도 - 어떤 집단에 속하는지 분류할 때 사용 (성별, 출생지 구분)
    - 순서척도 - 측정 대상의 서열관계를 관측하는 척도 (만족도, 선호도, 학년, 신용등급)
    - 구간척도(등간척도) - 측정 대상이 갖고 있는 속성의 양을 측정하는 것으로 구간이나 구간 사이의 간격이 의미가 있는 자료 (온도, 지수)
    - 비율척도 - 간격(차이)에 대한 비율이 의미를 가지는 가료, 절대적 기준인 0이 존재하고 사칙연산이 가능하며 제일 많은 정보를 가지는 척도 (무게, 나이, 시간, 거리)

    구간척도와 비율척도를 구분하는 문제 주의! 

    → 구간척도는 절대적 기준인 0이 존재하지 않음 (ex. 온도 0은 온도가 없다는 뜻이 아님)

### 통계분석

- 기술통계
    - 주관이 섞일 수 있는 과정을 배제하여 통계집단들의 여러 특성을 수량화하여 객관적인 데이터로 나타내는 통계분석 방법론
    - Sample을 통해 평균, 표준편차, 중위수, 최빈값, 그래프, 왜도, 첨도 등을 구하는 것
- 통계적 추론 (추측통계, 추론통계)
    - 수집된 자료를 이용해 대상 집단에 대한 의사결정을 하는 것
    - Sample을 통해 모집단을 추청하는 것
    - 모수추청, 가설검정, 예측

### 확률분포

- 이산형 확률분포 - 0이 아닌 확률값을 갖는 확률 변수를 셀 수 있는 경우 (확률질량함수)
    - 베르누이 확률분포
        - 결과가 2개만 나오는 경우
        - 동전 던지기, 시험의 합격 / 불합격
    - 이항분포
        - 베르누이 시행을 n번 반복했을 때 k번 성공할 확률
        - 야구 경기에서 5번 타석에 들어와 3번 안타를 칠 확률
    - 기하분포
        - 성공확률이 p인 베르누이 시행에서 첫번째 성공이 있기까지 x번 실패할 확률
        - 야구 경기에서 5번 타석에 들어와 3번째 타석에서 안타를 칠 확률
    - 다항분포
        - 이항분포를 확장한 것으로 세가지 이상의 결과를 가지는 반복 시행에서 발생하는 확률 분포
    - 포아송분포
        - 시간과 공간 내에서 발생하는 사건의 발생횟수에 대한 확률분포
        - 최근 5번의 야구 경기에서 10개의 홈런을 때렸다고 할 때, 오늘 경기에서 홈런을 못 칠 확률
- 연속형 확률분포 - 가능한 값이 실수의 어느 특정구간 전체에 해당하는 확률변수 (확률밀도함수)
    - 균일분포
        - 모든 확률변수 X가 균일한 확률을 가지는 확률분포
    - 정규분포
        - 평균이 ℳ, 분산이 σ인 x의 확률밀도함수
    - 지수분포
        - 어떤 사건이 발생할 때까지 경과 시간에 대한 연속확률분포
        - 전자레인지의 수명시간, 전화가 걸려올 때까지의 시간
    - t-분포
        - 표준정규분포와 같이 평균이 0을 중심으로 좌우가 동일한 분포
        - **두 집단의 평균이 동일한지 알고자 할 때 검정통계량으로 활용됨**
    - 카이제곱분포
        - 모평균과 모분산이 알려지지 않은 모집단의 모분산에 대한 가설 검정에 사용되는 분포
        - **두 집단 간의 동질성 검정에 활용**
    - F-분포
        - 두 집단간 분산의 동일성 검정에 사용
        - 항상 양의 값만 갖고 자유도를 2개 가지고 있으며 자유도가 커질수록 정규분포에 가까워짐

### 비모수 검정

- 모수적 방법
    - 검정하고자 하는 모집단의 분포에 대한 가정을 하고, 그 가정하에서 검정통계량과 검정통계량의 분포를 유도해 검정을 실시하는 방법
- 비모수적 방법
    - 자료가 추출된 모집단의 분포에 대한 아무 제약을 가하지 않고 검정을 실시하는 방법
    - 관측된 자료가 특정분포를 따른다고 가정할 수 없는 경우에 이용
    - 관측된 자료의 수가 많지 않거나 자료가 개체간의 서열관계를 나타내는 경우에 이용
    - 부호검정, 월콕슨의 순위합검정, 월콕슨의 부호순위합검정, 만-위트니의 U검정, 런검정, 스피어만의 순위상관계수
- 모수적 방법과 비모수적 방법의 차이점
    - 가설 설정

        모수적 → 가정된 분포의 모수에 대해 가설을 설정

        비모수적 → 가정된 분포가 없으므로 분포의 형태에 대해 설정 (ex. 분포의 형태가 동일함, 동일하지 않음)

    - 검정 방법

        모수적 → 관측된 자료를 이용해 구한 표본평균, 표본분산 등을 이용해 검정을 실시

        비모수적 → 관측값들의 순위(rank)나 두 관측값 차이의 부호 등을 이용해 검정

### 시계열 분석

- 시계열 자료
    - 시간의 흐름에 따라 관찰된 값들
    - 비정상성 시계열 자료
        - 시계열 분석을 실시할 때 다루기 어려운 자료로 대부분의 시계열 자료가 이에 해달
    - 정상성 시계열 자료
        - 비정상 시계열을 핸들링해 다루기 쉬운 시계열 자료로 변환한 자료
- 정상성
    - 평균이 일정 - 평균이 일정하지 않은 경우 차분을 통해 정상화
    - 분산이 일정 - 분산이 일정하지 않은 경우 변환을 통해 정상화
    - 공분산도 단지 시차에만 의존, 실제 특정 시점 t,s에는 의존하지 않음
    1. 정상 시계열은 어떤 시점에서 평균과 분산 그리고 특정한 시차의 길이를 갖는 자기공분산을 측정하더라도 동일한 값을 갖는다.
    2. 정상 시계열은 항상 그 평균값으로 회귀하려는 경향이 있으며, 그 평균값 주변에서의 변동은 대체로 일정한 폭을 갖는다.
    3. 정상 시계열이 아닌 경우 특정 기간의 시계열 자료로부터 얻은 정보를 다른 시기로 일반화할 수 없다. 
- 분석방법
    - 회귀분석, Box-Jenkins방법, 지수평활법, 시계열 분해법
    - 자료 형태에 따른 분석방법
        1. 일변량 시계열 분석
            - Box-Jenkins(ARMA), 지수 평활법, 시계열 분해법
            - 시간을 설명변수로 한 회귀모형주가, 소매물가지수 등 하나의 변수에 관심을 갖는 경우의 시계열 분석
        2. 다중 시계열 분석
            - 계량경제 모형, 전이함수 모형, 개입분석, 상태공간 분석, 다변량 ARIMA 등
            - 여러개의 시간에 따른 변수들을 활용하는 시계열 분석
    - 이동평균법
        - 과거로부터 현재까지의 시계열 자료를 대상으로 일정기간별 이동평균을 계산하고, 이들의 추세를 파악하여 다음 기간을 예측하는 방법
        - 계절변동과 불규칙변동을 제거하여 추세변동과 순환변동만 가진 시계열로 변환하는 방법으로도 사용됨
        - n개의 시계열 데이터를 m기간으로 이동평균하면 n-m+1개의 이동평균 데이터가 생성된다.
        - 특징
            - 간단하고 쉽게 미래를 예측할 수 있으며, 자료의 수가 많고 안정된 패턴을 보이는 경우 예측의 품질이 높음
            - 특정 기간 안에 속하는 시계열에 대해서는 동일한 가중치를 부여함
            - 일반적으로 시계열 자료에 뚜렷한 추세가 있거나 불규칙변동이 심하지 않은 경우에는 짧은기간의 평균을 사용, 반대로 불규칙변동이 심한 경우 긴 기간의 평균을 사용함
            - 이동평균법에서 가장 중요한 것은 적절한 기간을 사용하는 것, 즉, 적절한 n의 개수를 결정하는 것임
    - 지수평활법
        - 모든 시계열 자료를 사용하여 평균을 구하며, 시간의 흐름에 따라 최근 시계열에 더 많은 가중치를 부여하여 미래를 예측하는 방법
        - 특징
            - 단기간에 발생하는 불규칙 변동을 평활하는 방법
            - 자료의 수가 많고 안정된 패턴을 보이는 경우일수록 예측 품질이 높음
            - 가중치의 역할을 하는 것은 지수평활계수이며, 불규칙변동이 큰 시계열의 경우 지수평활계수는 작은 값을 불규칙 변동이 작은 시계열의 경우 큰 값의 지수평활계수를 적용
            - 지수평활계수는 예측오차를 비교하여 예측오차가 가장 작은 값을 선택하는 것이 바람직함
            - 지수평활계수는 과거로 갈수록 지속적으로 감소함
            - 지수평활법은 불규칙변동의 영향을 제거하는 효과가 있으며, 중기 예측 이상에 주로 사용된
- 시계열모형
    - 자기회귀 모형(AR 모형)
        - p 시점 전의 자료가 현재 자료에 영향을 주는 모형
        - 자기상관함수(ACF)는 빠르게 감소, 부분자기함수(PACF)는 어느 시점에서 절단점을 가진다
    - 이동평균 모형(MA 모형)
        - 유한한 개수의 백색잡음의 결합이므로 언제나 정상성을 만족
        - 1차 이동평균모형은 이동편균모형 중에서 가장 간단한 모형으로 시계열이 같은 시점의 백색잡음과 바로 전 시점의 백색잡음의 결합으로 이뤄진 모형
        - ACF에서 절단점을 갖고, PACF가 빠르게 감소
    - 자기회귀누적이동평균 모형(ARIMA 모형)
        - 비정상시계열 모형
        - 차분이나 변환을 통해 AR모형이나 MA모형, 이 둘을 합친 ARMA 모형으로 정상화 할 수 있음
        - p는 AR 모형, q는 MA모형과 관련이 있는 차수임
        - 시계열 {Zt}의 d번 차분한 시계열이 ARMA(p,q) 모형이면, 시계열 {Zt}는 차수가 p,d,q인 ARIMA 모형, 즉 ARIMA(p,d,q)모형을 갖는다고 함
    - 분해 시계열
        - 시계열에 영향을 주는 일반적인 요인을 시계열에서 분리해 분석하는 방법을 말하며 회귀분석적인 방법을 주로 사용
        - 경향(추세)요인, 계절요인, 순환요인, 불규칙요인

### 다차원척도법

- 다차원 척도법
    - 객체간 근접성(Proximity)을 시각화하는 통계기법
    - 군집분석과 같이 개체들을 대상으로 변수들을 측정한 후에 개체들 사이의 유사성/비유사성을 측정하여 개체들을 2차원 공간상에 점으로 표현하는 분석방법
    - 개체들을 2차원 또는 3차원 공간상에 점으로 표현하여 개체들 사이의 집단화를 시각적으로 표현하는 분석방법
- 목적
    - 데이터 속에 잠재해 있는 패턴, 구조를 찾아낸다.
    - 그 구조를 소수 차원의 공간에 기하학적으로 표현한다.
    - 데이터 축소의 목적으로 다차원척도법을 이용한다. 즉 데이터에 포함되는 정보를 끄집어내기 위해서 다차원척도법을 탐색수단으로써 사용한다.
    - 다차원척도법에 의해서 얻은 결과를 데이터가 만들어진 현상이나 과정에 고유의 구조로서 의미를 부여한다.
- 방법
    - 거리는 유클리드 거리행렬을 활용
    - 적합 정도를 스트레스 값으로 나타냄
    - 부적합도 기준으로 STRESS / S-STRESS 를 사용
    - 부적합도를 최소로 하는 반복알고리즘을 이용, 이 값이 일정 수준 이하가 될 때 최종적으로 적합된 모형으로 제시
- 종류
    - 계량적 MDS - 구간척도나 비율척도인 경우 활용
    - 비계량적 MDS - 순서척도인 경우 활용

### 주성분분석

- 주성분 분석
    - 주성분 : 서로 상관성이 높은 변수들의 선형 결합
    - 여러 변수들의 변량을 '주성분'으로 만들어 기존의 상관성이 높은 변수들을 요약, 축소하는 기법
    - 첫 번째 주성분으로 전체 변동을 가장 많이 설명할 수 있고, 두 번째는 첫 번째 주성분이 설명하지 못하는 나머지 변동을 정보의 손실 없이 가장 많이 설명할 수 있도록 변수들의 선형조합을 만듬
- 목적
    - 여러 변수들 간에 내재하는 상관관계, 연관성을 이용해 소수의 주성분으로 차원을 축소함으로써 데이터를 이해하기 쉽고 관리하기 쉽게 해줌
    - 다중공선성이 존재하는 경우, 상관성이 없는(적은) 주성분으로 변수들을 축소하여 모형 개발에 활용된다. (회귀분석이나 의사결정나무 등의 모형 개발 시 입력변수들간의 상관관계가 높은 다중공선성이 존재할 경우 모형이 잘못 만들어져 문제가 생김)
    - 연관성이 높은 변수를 주성분분석을 통해 차원을 축소한 후에 군집분석을 수행하면 군집화 결과와 연산속도를 개선할 수 있다
- 주성분분석 vs 요인분석
    - 요인분석(Factor Analysis)
        - 등간척도(혹은 비율척도)로 측정한 두 개 이상의 변수들에 잠재되어 있는 공통인자를 찾아내는 기법
    - 공통점
        - 모두 데이터를 축소하는 데 활용
        - 원래 데이터를 활용해서 몇 개의 새로운 변수들을 만들 수 있음
    - 차이점
        - 생성된 변수의 수
            - 요인분석 - 몇 개라고 지정 없이 만들 수 있음
            - 주성분분석 - 제 1주성분, 제 2주성분, 제 3주성분 정도로 활용 (대개 4개 이상은 넘지 않음)
        - 생성된 변수의 이름
            - 요인분석 - 분석자가 요인의 이름을 명명
            - 주성분분석 - 제 1주성분, 제 2주성분 등으로 표현
        - 생성된 변수들 간의 관계
            - 요인분석 - 대등한 관계 / 분류, 예측 다음 단계로 사용된다면 그 떄 중요성의 의미가 부여됨
            - 주성분분석 - 제 1주성분이 가장 중요하고, 그 다음 제 2주성분이 중요하게 취급됨
        - 분석방법의 의미
            - 요인분석 - 목표변수를 고려하지 않고 그냥 데이터가 주어지면 변수들을 비슷한 성격들로 묶어서 새로운 잠재변수들을 만듬
            - 주성분분석 - 목표 변수를 고려하여 목표 변수를 잘 예측/분류하기 위하여 원래 변수들의 선형 결합으로 이루어진 몇 개의 주성분(변수)들을 찾아내게 됨
- 주성분의 선택법
    - 주성분분석의 결과에서 누적기여율이 85%이상이면 주성분의 수로 결정할 수 있음
    - scree plot을 확용하여 고유값이 수평을 유지하기 전단계로 주성분의 수를 선택함